<?php

/**
 * @file
 * Primary module hooks for Protected Content module.
 */

 require_once 'inc/proc.functions.inc';

 /**
 * Implements hook_form_alter().
 */
function proc_form_proc_keys_generation_form_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state, $form_id) {
  $proc_data = _proc_common_get_decryption_form_data(NULL);

  $form['#attached'] = [
    'library' => [
      0 => 'proc/openpgpjs',
      1 => 'proc/proc-generate-keys',
    ],
    'drupalSettings' => [
      'proc' => [
        'proc_labels' => _proc_js_labels(),
        'proc_data'   => $proc_data, 
      ]
    ],
  ];
  $form['#action'] = 'generate-keys';
  // $form['#action'] = '../user/2';
  

  // ksm($form);

    // $formObject = $form_state->getFormObject();
    // if ($formObject instanceof \Drupal\Core\Entity\EntityFormInterface) {
    //   $entity = $formObject->getEntity();
    //   if (
    //     $entity->getEntityTypeId() === 'node'
    //     && in_array($entity->bundle(), ['organisation', 'location', 'event', 'article'])
    //   ) {
    //     
    //   }
    // }

}